!function(e,n){"function"==typeof define&&define.amd?define(n):"object"==typeof exports?module.exports=n(require,exports,module):e.Pusha=n()}(this,function(e,n,t){"use strict";function s(e,n){e.classList?e.classList.add(n):e.className+=" "+n}function o(e,n){e.classList?e.classList.remove(n):e.className=e.className.replace(i(n),"")}function c(){var e=document.createElement("div"),n={transition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var t in n)if(void 0!==e.style[t])return n[t]}var i=function(e){return new RegExp("(^| )"+e+"( |$)")};return function(e,n){var t="string"==typeof e?document.querySelector(e):e;if(!t)return!1;var i=document.documentElement,a=document.getElementsByClassName("pusha-blocker")[0],l=t.querySelector("[data-close]"),r=t.querySelector(".pusha-panel__content"),u=c(),d={closeOnEsc:!0,closeOnClick:!0,disableOverscroll:!0,activeClass:"pusha-active",onOpen:function(){},onClose:function(){}};for(var p in n)d.hasOwnProperty(p)&&(d[p]=n[p]);var v={isOpen:!1,open:function(){v.isOpen||(v.isOpen=!0,s(i,d.activeClass),s(t,"pusha-panel--active"),u||s(i,"pusha-animated"),v.activeElement=document.activeElement,r.focus(),d.onOpen(t))},close:function(){v.isOpen&&(v.isOpen=!1,o(i,d.activeClass),o(t,"pusha-panel--active"),u||o(i,"pusha-animated"),v.activeElement.focus(),d.onClose(t))},toggle:function(){v.isOpen?v.close():v.open()},disableOverscroll:function(e){e.addEventListener("touchstart",function(){var n=e.scrollTop+e.offsetHeight;0===e.scrollTop?e.scrollTop=1:n===e.scrollHeight&&(e.scrollTop=e.scrollTop-1)}),document.body.addEventListener("touchmove",function(n){v.isOpen&&e.scrollHeight<=e.clientHeight&&n.preventDefault()},{passive:!1})}};return u&&t.addEventListener(u,function(e){"opacity"==e.propertyName&&(v.isOpen?s(i,"pusha-animated"):o(i,"pusha-animated"))}),d.disableOverscroll&&v.disableOverscroll(r),d.closeOnEsc&&document.addEventListener("keydown",function(e){("key"in e?"Escape"==e.key||"Esc"==e.key:27==e.keyCode)&&(e.preventDefault(),v.close())}),void 0===a&&((a=document.createElement("div")).className="pusha-blocker",document.body.appendChild(a)),d.closeOnClick&&(a.addEventListener("click",v.close),a.addEventListener("touchstart",v.close)),l&&l.addEventListener("click",function(e){e.preventDefault(),v.close()}),r.setAttribute("tabindex","-1"),v}});