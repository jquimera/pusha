!function(e,n){"function"==typeof define&&define.amd?define(n):"object"==typeof exports?module.exports=n(require,exports,module):e.Pusha=n()}(this,function(e,n,t){"use strict";function s(e,n){e.classList?e.classList.add(n):e.className+=" "+n}function o(e,n){e.classList?e.classList.remove(n):e.className=e.className.replace(i(n),"")}function c(){var e=document.createElement("div"),n={transition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var t in n)if(void 0!==e.style[t])return n[t]}var i=function(e){return new RegExp("(^| )"+e+"( |$)")};return function(e,n){var t="string"==typeof e?document.querySelector(e):e;if(!t)return!1;var i=document.documentElement,a=document.getElementsByClassName("pusha-blocker")[0],l=t.querySelector("[data-close]"),r=c(),u={closeOnEsc:!0,closeOnClick:!0,disableOverscroll:!0,activeClass:"pusha-active",onOpen:function(){},onClose:function(){}};for(var d in n)u.hasOwnProperty(d)&&(u[d]=n[d]);var p={isOpen:!1,open:function(){p.isOpen||(p.isOpen=!0,s(i,u.activeClass),s(t,"pusha-panel--active"),r||s(i,"pusha-animated"),p.activeElement=document.activeElement,u.onOpen(t))},close:function(){p.isOpen&&(p.isOpen=!1,o(i,u.activeClass),o(t,"pusha-panel--active"),r||o(i,"pusha-animated"),p.activeElement.focus(),u.onClose(t))},toggle:function(){p.isOpen?p.close():p.open()},disableOverscroll:function(e){e.addEventListener("touchstart",function(){var n=e.scrollTop+e.offsetHeight;0===e.scrollTop?e.scrollTop=1:n===e.scrollHeight&&(e.scrollTop=e.scrollTop-1)}),document.body.addEventListener("touchmove",function(n){p.isOpen&&e.scrollHeight<=e.clientHeight&&n.preventDefault()},{passive:!1})}};return r&&t.addEventListener(r,function(e){"opacity"==e.propertyName&&(p.isOpen?s(i,"pusha-animated"):o(i,"pusha-animated"))}),u.disableOverscroll&&p.disableOverscroll(t.querySelector(".pusha-panel__content")),u.closeOnEsc&&document.addEventListener("keydown",function(e){("key"in e?"Escape"==e.key||"Esc"==e.key:27==e.keyCode)&&(e.preventDefault(),p.close())}),void 0===a&&((a=document.createElement("div")).className="pusha-blocker",document.body.appendChild(a)),u.closeOnClick&&(a.addEventListener("click",p.close),a.addEventListener("touchstart",p.close)),l&&l.addEventListener("click",function(e){e.preventDefault(),p.close()}),p}});