!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t(require,exports,module):e.Pusha=t()}(this,function(e,t,n){"use strict";function s(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function o(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(a(t),"")}function i(){var e=document.createElement("div"),t={transition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var n in t)if(void 0!==e.style[n])return t[n]}var a=function(e){return new RegExp("(^| )"+e+"( |$)")};return function(e,t){var n="string"==typeof e?document.querySelector(e):e;if(!n)return!1;var a=document.documentElement,c=document.getElementsByClassName("pusha-blocker")[0],r=n.querySelector("[data-close]"),l=n.querySelector(".pusha-panel__content"),u=i(),d={closeOnEsc:!0,closeOnClick:!0,disableOverscroll:!0,activeClass:"pusha-active",onOpen:function(){},onClose:function(){}};for(var p in t)d.hasOwnProperty(p)&&(d[p]=t[p]);var v={isOpen:!1,open:function(e){v.isOpen||(e.preventDefault(),v.isOpen=!0,s(a,d.activeClass),s(n,"pusha-panel--active"),u||s(a,"pusha-animated"),v.activeElement=e.currentTarget,v.activeElement.setAttribute("aria-expanded",!0),l.focus(),d.onOpen(n))},close:function(e){v.isOpen&&(e.preventDefault(),v.isOpen=!1,o(a,d.activeClass),o(n,"pusha-panel--active"),u||o(a,"pusha-animated"),v.activeElement.setAttribute("aria-expanded",!1),v.activeElement.focus(),d.onClose(n))},toggle:function(e){v.isOpen?v.close(e):v.open(e)},disableOverscroll:function(e){e.addEventListener("touchstart",function(){var t=e.scrollTop+e.offsetHeight;0===e.scrollTop?e.scrollTop=1:t===e.scrollHeight&&(e.scrollTop=e.scrollTop-1)}),document.body.addEventListener("touchmove",function(t){v.isOpen&&e.scrollHeight<=e.clientHeight&&t.preventDefault()})}};return u&&n.addEventListener(u,function(e){"opacity"==e.propertyName&&(v.isOpen?s(a,"pusha-animated"):o(a,"pusha-animated"))}),d.disableOverscroll&&v.disableOverscroll(l),d.closeOnEsc&&document.addEventListener("keydown",function(e){27===e.keyCode&&v.close(e)}),void 0===c&&((c=document.createElement("div")).className="pusha-blocker",document.body.appendChild(c)),d.closeOnClick&&(c.addEventListener("click",v.close),c.addEventListener("touchstart",v.close)),r&&r.addEventListener("click",v.close),l.setAttribute("tabindex","-1"),v}});